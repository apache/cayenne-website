<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.3">
        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon-04cb17e028.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32-12431ee8eb.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16-4f316e4d55.png">
        <link rel="manifest" href="/img/favicon/manifest-65e6aaa49e.json">
        <link rel="mask-icon" href="/img/favicon/safari-pinned-tab-558c1991b1.svg" color="#dc5656">
        <link rel="shortcut icon" href="/img/favicon/favicon-6cef91375b.ico">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/img/favicon/mstile-144x144-34e7696278.png">
        <meta name="msapplication-config" content="/img/favicon/browserconfig-82ff158058.xml">
        <meta name="theme-color" content="#ffffff">
        <link rel="stylesheet" href="https://cayenne.apache.org/css/styles-c1116f84b2.css"/>
        <script src="https://cayenne.apache.org/js/bundle-16fc0c2ea0.js"></script>
        <title>Cayenne 4.0 Milestone 4 Released &middot; Apache Cayenne</title>
    </head>
    <body>



<header class="page-header">
    <nav id="topbar" class="bg-dark" aria-label="breadcrumb" role="navigation">
      <ul class="breadcrumb breadcrumb-sm breadcrumb-dark  container  mb-0">
        <li class="breadcrumb-item dropdown">
          <a class="dropdown-toggle  text-nowrap  pr-1" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img class="mw-15px  mr-1" src="/img/feather-641aa69d09.svg" />Apache Software Foundation</a>
          <div class="dropdown-menu rounded-0" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="https://www.apache.org">Apache Homepage</a>
            <a class="dropdown-item" href="https://www.apache.org/licenses/">License</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <a class="dropdown-item" href="https://www.apache.org/security/">Security</a>
          </div>
        </li>
        
      </ul>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="https://cayenne.apache.org/">
           <img src="/img/logo_mono_full-d7a19eef61.svg" alt="Apache Cayenne" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mainMenu" aria-controls="mainMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainMenu">
          <ul class="navbar-nav  mt-3 mt-lg-0 mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="/download/">DOWNLOAD</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="/docs/4.1/getting-started-guide/">DOCUMENTATION</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="/about/support/">SUPPORT</a>
            </li>
            
          </ul>
          <ul class="navbar-nav  flex-row justify-content-center  mt-2 mt-lg-0 mb-2 mb-lg-0 " id="social-links-menu">
            <li class="nav-item  d-flex">
              <a class="nav-link  d-flex justify-content-center align-items-center" href="https://github.com/apache/cayenne">
                <img src="/img/icon_octocat_stars-c24dac94b8.svg" alt="GitHub" /><span class="stargazers_count  ml-1l2"></span></a>
            </li>
            <li class="nav-item  d-flex">
              <a class="nav-link  d-flex justify-content-center align-items-center" href="https://twitter.com/ApacheCayenne">
                <img src="/img/icon_twitter-220a129d14.svg" alt="Twitter" />
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
</header>




    <main class="container  py-5">
        
                <section>
                    <article>
                        <h1 class="text-center">Cayenne 4.0 Milestone 4 Released<br />
                            <small class="font-size-1rem text-muted">Dec 31, 2016</small>
                        </h1>
                        

<p>Apache Cayenne team is glad to announce the latest milestone of Cayenne - 4.0.M. The new release features a number of important things:</p>

<ul>
<li>Stabilizes database reverse-engineering tools for DB-first ORM flow.</li>
<li>Plugs holes and omissions in the fluent query API.</li>
<li>Expands encryption capabilities to all data types.</li>
<li>Improves transaction management API.</li>
<li>Provides alternative binary protocols for ROP, greatly improving its performance.</li>
<li>Includes a new Modeler welcome screen.</li>
<li>Fixes numerous bugs, updates docs, etc., etc.</li>
</ul>

<p>Cayenne can be downloaded from <a href="/download.html">here</a>. Make sure to consult <a href="https://github.com/apache/cayenne/blob/4.0.M4/docs/doc/src/main/resources/UPGRADE.txt">UPGRADE.txt</a> file before updating.</p>

<p>Before we start discussing individual features, a few words on the future development effort. Cayenne 4.0 is quickly approaching &ldquo;beta&rdquo; status. There&rsquo;s a good chance that the following release will be feature-complete and we will enter &ldquo;beta&rdquo; and associated code freeze of the runtime framework.</p>

<p>Now the new things in a bit more detail:</p>

<div class="pb-3"><!-- gap 3rem --></div>

<h3 id="fluent-query-api">Fluent query API</h3>

<p>These fluent queries are new in M4:</p>

<p><em>SQLExec</em></p>

<pre><code>// insert
int inserted = SQLExec.query(&quot;INSERT INTO ARTIST (ARTIST_ID, ARTIST_NAME) &quot; + 
  &quot;VALUES (#bind($id), #bind($name))&quot;)
  .paramsArray(55, &quot;a3&quot;)
  .update(context);

// update
int updated = SQLExec
  .query(&quot;UPDATE ARTIST SET ARTIST_NAME = 'b3' WHERE ARTIST_NAME = 'a3'&quot;)
  .update(context);
</code></pre>

<p><em>MappedSelect</em></p>

<pre><code>List&lt;Artist&gt; artists = MappedSelect.query(&quot;SelectArtists&quot;, Artist.class)
  .param(&quot;name&quot;, &quot;artist1&quot;)
  .select(context);
</code></pre>

<p><em>MappedExec</em></p>

<pre><code>int[] updated = MappedExec.query(&quot;UpdateArtists&quot;).param(&quot;name&quot;, &quot;artist2&quot;).update(context);
</code></pre>

<p><em>ProcedureCall</em></p>

<pre><code>// select
List&lt;Artist&gt; artists = ProcedureCall.query(&quot;select_sp&quot;, Artist.class)
                .param(&quot;name&quot;, &quot;Artist&quot;)
                .param(&quot;paintingPrice&quot;, 3000)
                .limit(2).select(context);

// update
int updated = ProcedureCall.query(&quot;update_sp&quot;)
                .param(&quot;paintingPrice&quot;, 3000).update(context);

// call and get out parameters
int outParam = ProcedureCall.query(&quot;out_sp&quot;)
                .param(&quot;name&quot;, &quot;Artist&quot;)
                .call(context).getOutParam(&quot;artist_out&quot;);
</code></pre>

<div class="pb-3"><!-- gap 3rem --></div>

<h3 id="reverse-engineering-improvements">Reverse Engineering Improvements</h3>

<p>There are a lot of improvements and bug fixes covering reverse engineering functionality (aka &ldquo;DB-first flow&rdquo;). There&rsquo;s still more work to do to make it perfect, but the API is starting to stabilize and the tools have already become very usable (as in actually used in production on many projects). Follow this <a href="/docs/4.0/cayenne-guide/cayenne-guide-part4.html">link</a> to learn what DB-First flow is all about and how to use it.</p>

<div class="pb-3"><!-- gap 3rem --></div>

<h3 id="cayenne-crypto-improvements">Cayenne Crypto Improvements</h3>

<p>We&rsquo;ve aded support for mapping encrypted columns to numbers, Strings, etc.</p>

<div class="pb-3"><!-- gap 3rem --></div>

<h3 id="transaction-control">Transaction control</h3>

<p>Added TransactionListener to allow for better control of manual transactions.</p>

<div class="pb-3"><!-- gap 3rem --></div>

<h3 id="rop-improvements">ROP Improvements</h3>

<p>With M4 it&rsquo;s much easier to plug external tools for ROP connectivity and serialization purposes. Jetty HTTP/1.1 and HTTP/2 Client and Protostuff have been already added to the Cayenne and are supported out of the box.</p>

<div class="pb-3"><!-- gap 3rem --></div>
<h2 class="text-center">A full list of changes in this release:</h2>
<div class="pb-2"><!-- gap 2rem --></div>

<ul>
<li>CAY-2051 Applying new Reverse Engineering to the Modeler</li>
<li>CAY-2053 SQLExec fluent query API</li>
<li>CAY-2060 Replace Query objects in DataMap with query descriptors</li>
<li>CAY-2062 MappedSelect and MappedExec fluent query API</li>
<li>CAY-2063 ProcedureCall fluent query API</li>
<li>CAY-2065 Pluggable serialization and connectivity layers for ROP</li>
<li>CAY-2073 Ordering.orderedList methods</li>
<li>CAY-2074 Support for catalogs in stored procedures</li>
<li>CAY-2076 Implement Jetty HTTP/1.1 and HTTP/2 Client support for ROP Client</li>
<li>CAY-2083 Implement Protostuff as serialization service for Cayenne ROP</li>
<li>CAY-2090 Untangle HttpRemoteService from ServiceContext thread local setup</li>
<li>CAY-2100 Add supporting generated keys for PostgreSQL</li>
<li>CAY-2102 EJBQL: db: path not supported in select columns</li>
<li>CAY-2103 cayenne-crypto: support for mapping non-String and non-binary types</li>
<li>CAY-2106 cayenne-crypto: allow DI contribution of type converters inside ValueTransformerFactory</li>
<li>CAY-2107 cayenne-crypto: Lazy initialization of crypto subsystem</li>
<li>CAY-2111 Unbind transaction object from the current thread for iterated queries</li>
<li>CAY-2112 Expose callback for &ldquo;performInTransaction&rdquo;</li>
<li>CAY-2113 cdbimport: Reverse-engineering reinstates previously ignored columns</li>
<li>CAY-2114 cdbimport: object layer settings are not respected</li>
<li>CAY-2115 DbLoader - allow loading DataMap without Obj layer</li>
<li>CAY-2116 Split schema synchronization code in a separate module</li>
<li>CAY-2118 cdbimport: drop support for the old style of table filtering</li>
<li>CAY-2129 Modeler: reengineer dialog improvements</li>
<li>CAY-2130 Stripping common name prefixes on reverse engineering</li>
<li>CAY-2132 Adding SybaseSelectTranslator to support TOP/DISTINCT TOP in limited queries</li>
<li>CAY-2133 ObjectNameGenerator refactoring - unifying relationship name generation</li>
<li>CAY-2135 cdbimport: reset DbEntity catalogs / schemas to DataMap defaults</li>
<li>CAY-2136 Allow Ordering.orderedList(…) methods to accept a Collection rather than only a List</li>
<li>CAY-2160 Modeler: new welcome screen</li>
</ul>

<div class="pb-2"><!-- gap 2rem --></div>

<h4 id="bug-fixes">Bug Fixes:</h4>

<ul>
<li>CAY-2016 cdbimport: Rename table with toMany relationship causes migration error</li>
<li>CAY-2064 Issue with BeanAccessor for classes with complex inheritance</li>
<li>CAY-2066 Fixes for inner enums handling in ExtendedTypeMap</li>
<li>CAY-2067 Cayenne 4.0 connection pool is occasionally running out of connections</li>
<li>CAY-2070 Modeler sync function adds extraneous ObjRelationships inside the class hierarchy</li>
<li>CAY-2078 Client code gen bug. Unnecessary DataMap class generation setting datamap gen to false.</li>
<li>CAY-2080 Cayenne doesn&rsquo;t pick up reverse engineering file changes</li>
<li>CAY-2084 ObjectIdQuery - no cache access polymorphism</li>
<li>CAY-2086 SelectById.selectFirst stack overflow</li>
<li>CAY-2087 PostCommitFilter is confused about changes made by Pre listeners</li>
<li>CAY-2089 HTTP connections aren&rsquo;t always closed in new ROP implementation</li>
<li>CAY-2097 NullPointerException while updating relationships for entities with vertical inheritance</li>
<li>CAY-2101 DataContext.currentSnapshot() doesn&rsquo;t set snapshot entity name</li>
<li>CAY-2105 Add missing elements to the reverseEngineering.xsd</li>
<li>CAY-2108 cayenne-di: StackOverflow for decorator that takes Provider of the delegate</li>
<li>CAY-2110 Obfuscated exception when processing iterated results</li>
<li>CAY-2119 ProjectUpgrader test failure (Windows)</li>
<li>CAY-2122 Vertical Inheritance: Cannot Insert Record For Implementing Class with Attribute And Relationship</li>
<li>CAY-2125 SchemaUpdateStrategy doesn&rsquo;t work with multiple DataNodes</li>
<li>CAY-2126 Modeler cannot upgrade project from v7 to v9</li>
<li>CAY-2128 Modeler stored procedures are not imported</li>
<li>CAY-2131 Modeler NullPointerException in reverse engineering when importing different catalogs in one datamap</li>
<li>CAY-2138 NVARCHAR, LONGNVARCHAR and NCLOB types are missing from Firebird types.xml</li>
<li>CAY-2141 Disjoint-by-id prefetch generates repeating ID conditions</li>
<li>CAY-2143 NPE in BaseSchemaUpdateStrategy</li>
<li>CAY-2144 cdbimport always fails for databases which don&rsquo;t support catalogs</li>
<li>CAY-2146 Vertical inheritance: record still inserted into parent db table when child validation fails</li>
<li>CAY-2148 Failure upgrading from 3.1 to M4</li>
<li>CAY-2150 UI bug: PK generation custom sequence is getting reset</li>
<li>CAY-2151 Migrate Database Schema: issue when no db is specified</li>
<li>CAY-2153 Modeler Exception in save action after reverse engineering some complex DB schema</li>
<li>CAY-2154 Migrate db: queries order</li>
</ul>

                    </article>
                </section>
            
        <div class="pb-3"></div>
        <div class="row">
            <div class="col-12 col-md-6  text-center text-md-left">
                
                <a class="btn btn-link" href='/2017/03/cayenne-40M5-released.html'>
                    <span class="d-block d-md-none  text-muted">Prev: </span>
                    <i class="small  fa fa-chevron-left  mr-3l2  d-none d-md-inline"></i>
                    Cayenne 4.0 Milestone 5 Released
                </a>
                
            </div>
            <div class="col-12 col-md-6  text-center text-md-right">
                
                <a class="btn btn-link" href='/2016/05/cayenne-311-released.html'>
                    <span class="d-block d-md-none  text-muted">Next: </span>
                    Cayenne 3.1.1 Released
                    <i class="small  fa fa-chevron-right  ml-3l2  d-none d-md-inline"></i>
                </a>
                
            </div>
        </div>
    </main>


<footer class="bg-dark">
    <div class="footer-nav container  text-center text-lg-left  pb-3">
        <div class="row  pt-5 pb-3">
            
            <div class="col-sm-6 col-lg-3">
                <h4>About</h4>
                <ul class="list-unstyled">
                    
                    <li>
                        <a href="/why-cayenne.html">Why Cayenne?</a>
                    </li>
                    
                    <li>
                        <a href="/download/">Download</a>
                    </li>
                    
                    <li>
                        <a href="/success-stories.html">Success Stories</a>
                    </li>
                    
                    <li>
                        <a href="/about/support/">Support</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="col-sm-6 col-lg-3">
                <h4>Documentation</h4>
                <ul class="list-unstyled">
                    
                    <li>
                        <a href="/docs/4.0/getting-started-guide/">Getting Started (4.0)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.1/getting-started-guide/">Getting Started (4.1)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.2/getting-started-guide/">Getting Started (4.2)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.0/cayenne-guide/">Cayenne Guide (4.0)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.1/cayenne-guide/">Cayenne Guide (4.1)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.2/cayenne-guide/">Cayenne Guide (4.2)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.1/getting-started-db-first/">Database First tutorial (4.1)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.2/getting-started-db-first/">Database First tutorial (4.2)</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="col-sm-6 col-lg-3">
                <h4>Collaboration</h4>
                <ul class="list-unstyled">
                    
                    <li>
                        <a href="https://issues.apache.org/jira/browse/CAY">Bug/Feature Tracker</a>
                    </li>
                    
                    <li>
                        <a href="/mailing-lists.html">Mailing Lists</a>
                    </li>
                    
                    <li>
                        <a href="/dev/code-repository.html">Code Repository</a>
                    </li>
                    
                    <li>
                        <a href="/dev/">Developer Guide</a>
                    </li>
                    
                    <li>
                        <a href="/how-can-i-help.html">How can I help?</a>
                    </li>
                    
                    <li>
                        <a href="/contributors.html">Contributors</a>
                    </li>
                    
                    <li>
                        <a href="/thanks.html">Thanks</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="col-sm-6 col-lg-3">
                <h4>News</h4>
                <ul class="list-multiline-items list-unstyled  mb-0">
                    
                    <li>
                        <time datetime="2021-12-24 12:00:00 &#43;0300 &#43;03" class="xsmall d-block">Dec 24, 2021</time>
                        <a href="/2021/12/cayenne-411-released/">Cayenne 4.1.1 Released</a>
                    </li>
                    
                    <li>
                        <time datetime="2021-12-06 15:00:00 &#43;0300 &#43;03" class="xsmall d-block">Dec 06, 2021</time>
                        <a href="/2021/12/cayenne-42b1-released/">Cayenne 4.2 Beta 1 Released</a>
                    </li>
                    
                    <li>
                        <time datetime="2021-03-19 18:00:00 &#43;0300 &#43;03" class="xsmall d-block">Mar 19, 2021</time>
                        <a href="/2021/03/cayenne-42m3-released/">Cayenne 4.2 Milestone 3 Released</a>
                    </li>
                    
                </ul>
                <a class="btn-link text-uppercase xsmall" href="https://cayenne.apache.org/news">
                    More news
                    <i class="fa fa-lg fa-long-arrow-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
        <hr class="mt-0 mb-3" />
        <p class="copy xsmall text-center  mw-75 mx-auto mb-0">
            Copyright © 2001-2021 Apache Software Foundation. Apache Cayenne, Cayenne, Apache, the Apache feather logo, and the Apache Cayenne project logo are trademarks of The Apache Software Foundation. <a href="https://cayenne.apache.org/privacy-policy.html">Privacy policy</a>.
            <img class="d-block  mx-auto mt-2" src="/img/logo_mono-3302daa3cf.svg" alt="Apache Cayenne" />
        </p>
    </div>
</footer>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-7036673-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </body>
</html>
