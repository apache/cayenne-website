<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.3">
        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon-04cb17e028.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32-12431ee8eb.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16-4f316e4d55.png">
        <link rel="manifest" href="/img/favicon/manifest-65e6aaa49e.json">
        <link rel="mask-icon" href="/img/favicon/safari-pinned-tab-558c1991b1.svg" color="#dc5656">
        <link rel="shortcut icon" href="/img/favicon/favicon-6cef91375b.ico">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/img/favicon/mstile-144x144-34e7696278.png">
        <meta name="msapplication-config" content="/img/favicon/browserconfig-82ff158058.xml">
        <meta name="theme-color" content="#ffffff">
        <link rel="stylesheet" href="https://cayenne.apache.org/css/styles-a216e88c4f.css"/>
        <script src="https://cayenne.apache.org/js/bundle-b017b6b604.js"></script>
        <script src="https://www.apachecon.com/event-images/snippet.js"></script>
        <title>Release Guide &middot; Apache Cayenne</title>
    </head>
    <body>



<header class="page-header">
    <nav id="topbar" class="bg-dark" aria-label="breadcrumb" role="navigation">
      <ul class="breadcrumb breadcrumb-sm breadcrumb-dark  container  mb-0">
        <li class="breadcrumb-item dropdown">
          <a class="dropdown-toggle  text-nowrap  pr-1" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img class="mw-15px  mr-1" src="/img/feather-641aa69d09.svg" />Apache Software Foundation</a>
          <div class="dropdown-menu rounded-0" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="https://www.apache.org">Apache Homepage</a>
            <a class="dropdown-item" href="https://www.apache.org/licenses/">License</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <a class="dropdown-item" href="https://www.apache.org/security/">Security</a>
            <a class="dropdown-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
            <a class="ml-1 mt-1 acevent" data-format="wide" data-mode="dark" data-width="120"></a>
          </div>
        </li>
      </ul>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="https://cayenne.apache.org/">
           <img src="/img/logo_mono_full-d7a19eef61.svg" alt="Apache Cayenne" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mainMenu" aria-controls="mainMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainMenu">
          <ul class="navbar-nav  mt-3 mt-lg-0 mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="/download/">DOWNLOAD</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="/docs/4.2/getting-started-guide/">DOCUMENTATION</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="/about/support/">SUPPORT</a>
            </li>
            
          </ul>
          <ul class="navbar-nav  flex-row justify-content-center  mt-2 mt-lg-0 mb-2 mb-lg-0 " id="social-links-menu">
            <li class="nav-item  d-flex">
              <a class="nav-link  d-flex justify-content-center align-items-center" href="https://github.com/apache/cayenne">
                <img src="/img/icon_octocat_stars-c24dac94b8.svg" alt="GitHub" />
              </a>
            </li>
            <li class="nav-item  d-flex">
              <a class="nav-link  d-flex justify-content-center align-items-center" href="https://twitter.com/ApacheCayenne">
                <img src="/img/icon_twitter-220a129d14.svg" alt="Twitter" />
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
</header>




    <main class="container  py-5">
        
                <section>
                    <article>
                        <h1 class="text-center">Release Guide</h1>
                        <p>This page describes the steps that a Cayenne Release Manager needs to
perform to prepare a release. The specifics of Cayenne release process is
that we are publishing both downloadable assemblies and Maven artifacts, so
we have to build and publish things twice. Both forms of Cayenne release
are also available for evaluation during the vote.</p>


<div class="pb-3"></div>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>A release manager must have his public key appended to the KEYS file
checked in to source control and the key published on one of the public key servers.
More info can be found at <a href="https://www.apache.org/dev/release-signing.html">https://www.apache.org/dev/release-signing.html</a></li>
<li>Make sure &ldquo;apache-releases&rdquo; repository is configured in
<em>~/.m2/settings.xml</em> and an appropriate password is setup. See <a href="https://www.apache.org/dev/publishing-maven-artifacts.html">this page</a>
for details.</li>
<li>As Cayenne has modules which require Java 1.8, you should use at least Java 1.8 to perform the release.</li>
</ul>


<div class="pb-3"></div>
<h2 id="preparing-sources">Preparing Sources</h2>
<ul>
<li>Edit <code>UPGRADE-NOTES.txt</code> if there is anything to add there.</li>
<li>Update <code>RELEASE-NOTES.txt</code> with actual release name and current date as a release date.</li>
<li>Check Sources Compliance with <a href="https://creadur.apache.org/rat/">RAT</a>. To run RAT,
download the distro and unpack it somewhere. You can run it directly, or use a convenience script available at the root of Cayenne
source. Then read the report and fix any issues.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd cayenne
./rat.sh ~/Desktop/apache-rat-0.14-SNAPSHOT.jar  &gt; report.txt
</code></pre></div><p>As an alternative you could use Apache RAT maven plugin already configured in the Cayenne:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn apache-rat:check
</code></pre></div></li>
</ul>


<div class="pb-3"></div>
<h2 id="tagging-the-repo-and-releasing-maven-artifacts">Tagging the Repo and Releasing Maven Artifacts</h2>
<ul>
<li>
<p>Create a Git tag and Create Maven Staging Repository:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd cayenne
mvn release:clean
mvn release:prepare -DpreparationGoals<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clean install&#34;</span> -DautoVersionSubmodules<span style="color:#f92672">=</span>true
mvn release:perform -P gpg <span style="color:#f92672">[</span>-Dgpg.keyname<span style="color:#f92672">=</span>B8AF90BF<span style="color:#f92672">]</span>
</code></pre></div></li>
<li>
<p>Close the staging repo. Login to <a href="https://repository.apache.org/">https://repository.apache.org/</a> with
Apache ID/password, go to &ldquo;Staging Repositories&rdquo; page. Select a staging
repository that was just created during &ldquo;<em>mvn release:perform</em>&rdquo;, click
&ldquo;Close&rdquo;. Take a note of the freshly created staging repository URL. It will
be used by the people voting on Cayenne. It may look like this:
<a href="https://repository.apache.org/content/repositories/orgapachecayenne-052/">https://repository.apache.org/content/repositories/orgapachecayenne-052/</a></p>
</li>
</ul>


<div class="pb-3"></div>
<h2 id="releasing-downloadable-assemblies">Releasing Downloadable Assemblies</h2>
<ul>
<li>
<p>Switch to the release tag created above.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/apache/cayenne.git --branch <span style="color:#e6db74">&#34;XXX&#34;</span> --depth <span style="color:#ae81ff">1</span>
</code></pre></div></li>
<li>
<p>Build source package (it will be the basis for the binary packages built in the next steps) :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn clean install -Passembly,src
</code></pre></div></li>
<li>
<p>Build binary assemblies. <em>Release manager may skip running unit tests from here, as shown
below, although release evaluators should use the src assembly for <a href="running-unit-tests.html">unit testing</a>
and other kinds of testing.</em> For further details on a general Cayenne build process check <a href="building-cayenne.html">this page</a>.</p>
<ul>
<li>
<p>Take <em>&ldquo;assembly/target/cayenne-XXX-src.tar.gz&rdquo;</em>, unpack it somewhere, and
perform binary builds from the unpacked directory (NOT FROM GIT CHECKOUT).</p>
</li>
<li>
<p>Per Apache release guidelines there shouldn&rsquo;t be any binaries in a release, so you need manually copy
Gradle wrapper. Just copy <em>cayenne-gradle-plugin/gradle</em> folder to the corresponding folder in unpacked sources.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp -r ./cayenne-gradle-plugin/gradle ./assembly/target/cayenne-XXX-src/cayenne-gradle-plugin/
</code></pre></div></li>
<li>
<p>Build binary artifacts</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn clean package -Passembly,generic -DskipTests

<span style="color:#75715e"># You will need to do this on OS X</span>
mvn clean package -Passembly,mac -DskipTests

<span style="color:#75715e"># You will need to do this on Windows</span>
mvn clean package -Passembly,windows -DskipTests
</code></pre></div></li>
</ul>
</li>
<li>
<p>Signing assemblies</p>
<p>You can find additional information in official Apache <a href="https://www.apache.org/dev/release-distribution">Release Distribution policy</a>
and on <a href="https://www.apache.org/dev/release-signing.html">this page</a>.
Release manager key must be in the project KEYS file. Signing is a manual
procedure not included in the Ant or Maven script. Here is how it might
work (&quot;-u&rdquo; option can be omitted if you have only one GPG key):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gpg -a -b -u B8AF90BF cayenne-X.X.tar.gz
gpg --print-md SHA512 cayenne-X.X.tar.gz &gt; cayenne-X.X.tar.gz.sha512
</code></pre></div></li>
<li>
<p>Assemblies, signature and checksum files are committed to the special SVN repo
used for staging development releases: <a href="https://dist.apache.org/repos/dist/dev/cayenne/">https://dist.apache.org/repos/dist/dev/cayenne/</a>.
Use a separate folder for each release. For more info on this repository check <a href="https://apache.org/legal/release-policy.html#stage">the infrastructure docs</a>.</p>
</li>
</ul>


<div class="pb-3"></div>
<h2 id="voting">Voting</h2>
<ul>
<li>The vote is started on the dev mailing list.</li>
<li>All committers are encouraged to vote on releases. Committer votes will
be considered by the PMC (particularly -1 votes will be discussed) when
making the final decision, but are not binding.</li>
<li>Each PMC member will do the following before voting on a release:
<ul>
<li>download the artifacts</li>
<li>verify GPG signature and sha512 checksum</li>
<li>satisfy themselves that the source matches the appropriate Git tag.
This can be done by diffing the source against a recent git checkout.</li>
<li>satisfy themselves that the Apache licensing requirements are met (this
will usually be achieved by ensuring that all notices are in place and
verifying that the source matches Git since all commits to Git are possible
only if the committer has a CLA on file).</li>
<li>satisfy themselves that the binary distribution is sane and passes
basic usability tests. For example, that the Cayenne Modeler runs and the
main jar passes some basic tests.</li>
<li>satisfy themselves that the source passes agreed unit tests (either by
running them manually or verifying that CI service has run those tests against
the equivalent source).</li>
</ul>
</li>
</ul>


<div class="pb-3"></div>
<h2 id="publishing-the-release">Publishing the Release</h2>
<ul>
<li>
<p>Publish Maven artifacts. Go back to <a href="https://repository.apache.org/">https://repository.apache.org/</a>,
select the staging repo and click &ldquo;Release&rdquo;.</p>
</li>
<li>
<p>Publish downloadable assemblies by moving them to the release repo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">svn mv https://dist.apache.org/repos/dist/dev/cayenne/X.X <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>       https://dist.apache.org/repos/dist/release/cayenne/
</code></pre></div></li>
</ul>


<div class="pb-3"></div>
<h2 id="after-the-release">After the release</h2>
<ul>
<li>
<p>Delete a <strong>previous version</strong> of Cayenne release of the same branch from the dist server.
It should be already [archived by Apache] (<a href="https://www.apache.org/dev/release.html#when-to-archive)">https://www.apache.org/dev/release.html#when-to-archive)</a>. Do this with an svn command like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">svn rm https://dist.apache.org/repos/dist/release/cayenne/Y.Y
</code></pre></div></li>
<li>
<p><a href="https://issues.apache.org/jira/plugins/servlet/project-config/CAY/versions">Tell Jira</a>
that the release has been released. Ensure there is another milestone or
release target already created for further work, but this was probably
already done when a branch was created in preparation for release.</p>
</li>
<li>
<p>If the release is significant, consider press releases to relevant news
sources</p>
</li>
<li>
<p>Review the main website pages (front page and why-cayenne especially) to
add any new features</p>
</li>
<li>
<p>Add new cayenne version and a news item to the Cayenne web site (see <a href="https://cayenne.apache.org/dev/cms-guide.html#content-modifications">CMS Guide</a>)</p>
</li>
<li>
<p>Send an email to the Cayenne user and developer lists</p>
</li>
<li>
<p>Send a notification email to announce(at)apache.org</p>
</li>
<li>
<p>Update <a href="https://en.wikipedia.org/wiki/Apache_Cayenne">https://en.wikipedia.org/wiki/Apache_Cayenne</a></p>
</li>
</ul>


<div class="pb-3"></div>
<h2 id="reference">Reference:</h2>
<ul>
<li>Apache release publishing: <a href="https://www.apache.org/dev/release-publishing.html">https://www.apache.org/dev/release-publishing.html</a></li>
<li>Apache Maven release publishing: <a href="https://www.apache.org/dev/publishing-maven-artifacts.html">https://www.apache.org/dev/publishing-maven-artifacts.html</a></li>
<li>Apache RAT: <a href="https://creadur.apache.org/rat/">https://creadur.apache.org/rat/</a></li>
<li>Signing Releases: <a href="https://www.apache.org/dev/release-signing.html">https://www.apache.org/dev/release-signing.html</a></li>
</ul>

                    </article>
                </section>
            
        
        <div class="pb-3"></div>
        <div class="row">
            <div class="col-12 col-md-6  text-center text-md-left">
                
                <a class="btn btn-link" href='/dev/building-cayenne.html'>
                    <span class="d-block d-md-none  text-muted">Prev: </span>
                    <i class="small  fa fa-chevron-left  mr-3l2  d-none d-md-inline"></i>
                    Building Cayenne
                </a>
                
            </div>
            <div class="col-12 col-md-6  text-center text-md-right">
                
                <a class="btn btn-link" href='/dev/running-unit-tests.html'>
                    <span class="d-block d-md-none  text-muted">Next: </span>
                    Running Unit Tests
                    <i class="small  fa fa-chevron-right  ml-3l2  d-none d-md-inline"></i>
                </a>
                
            </div>
        </div>
    </main>

<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=5c836e39-be6b-4a21-a946-a97b5b69f172" />

<footer class="bg-dark">
    <div class="footer-nav container  text-center text-lg-left  pb-3">
        <div class="row  pt-5 pb-3">
            
            <div class="col-sm-6 col-lg-3">
                <h4>About</h4>
                <ul class="list-unstyled">
                    
                    <li>
                        <a href="/why-cayenne.html">Why Cayenne?</a>
                    </li>
                    
                    <li>
                        <a href="/download/">Download</a>
                    </li>
                    
                    <li>
                        <a href="/success-stories.html">Success Stories</a>
                    </li>
                    
                    <li>
                        <a href="/about/support/">Support</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="col-sm-6 col-lg-3">
                <h4>Documentation</h4>
                <ul class="list-unstyled">
                    
                    <li>
                        <a href="/docs/4.0/getting-started-guide/">Getting Started (4.0)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.1/getting-started-guide/">Getting Started (4.1)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.2/getting-started-guide/">Getting Started (4.2)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.0/cayenne-guide/">Cayenne Guide (4.0)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.1/cayenne-guide/">Cayenne Guide (4.1)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.2/cayenne-guide/">Cayenne Guide (4.2)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.1/getting-started-db-first/">Database First tutorial (4.1)</a>
                    </li>
                    
                    <li>
                        <a href="/docs/4.2/getting-started-db-first/">Database First tutorial (4.2)</a>
                    </li>
                    
                    <li>
                        <a href="/legacy/legacy-docs/">Legacy Documentation</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="col-sm-6 col-lg-3">
                <h4>Collaboration</h4>
                <ul class="list-unstyled">
                    
                    <li>
                        <a href="https://issues.apache.org/jira/browse/CAY">Bug/Feature Tracker</a>
                    </li>
                    
                    <li>
                        <a href="/mailing-lists.html">Mailing Lists</a>
                    </li>
                    
                    <li>
                        <a href="/dev/code-repository.html">Code Repository</a>
                    </li>
                    
                    <li>
                        <a href="/dev/">Developer Guide</a>
                    </li>
                    
                    <li>
                        <a href="/how-can-i-help.html">How can I help?</a>
                    </li>
                    
                    <li>
                        <a href="/contributors.html">Contributors</a>
                    </li>
                    
                    <li>
                        <a href="/thanks.html">Thanks</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="col-sm-6 col-lg-3">
                <h4>News</h4>
                <ul class="list-multiline-items list-unstyled  mb-0">
                    
                    <li>
                        <time datetime="2023-05-25 18:00:00 &#43;0300 &#43;0300" class="xsmall d-block">May 25, 2023</time>
                        <a href="/2023/05/cayenne-42-final-released/">Cayenne 4.2 Final Released</a>
                    </li>
                    
                    <li>
                        <time datetime="2023-03-02 12:00:00 &#43;0300 &#43;0300" class="xsmall d-block">Mar 02, 2023</time>
                        <a href="/2023/03/cayenne-403-released/">Cayenne 4.0.3 Released</a>
                    </li>
                    
                    <li>
                        <time datetime="2022-12-05 12:00:00 &#43;0300 &#43;0300" class="xsmall d-block">Dec 05, 2022</time>
                        <a href="/2022/12/cayenne-42rc2-released/">Cayenne 4.2 Release Candidate 2 Released</a>
                    </li>
                    
                </ul>
                <a class="btn-link text-uppercase xsmall" href="https://cayenne.apache.org/news">
                    More news
                    <i class="fa fa-lg fa-long-arrow-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
        <hr class="mt-0 mb-3" />
        <p class="copy xsmall text-center  mw-75 mx-auto mb-0">
            Copyright Â© 2001-2024 Apache Software Foundation. Apache Cayenne, Cayenne, Apache, the Apache feather logo, and the Apache Cayenne project logo are trademarks of The Apache Software Foundation.
            <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy policy</a>.
            <img class="d-block  mx-auto mt-2" src="/img/logo_mono-3302daa3cf.svg" alt="Apache Cayenne" />
        </p>
    </div>
</footer>
    </body>
</html>
